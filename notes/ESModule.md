<!--
 * @Author: luoxi
 * @LastEditTime: 2022-06-26 22:56:28
 * @LastEditors: your name
 * @Description: 
-->
- [ES Module](#es-module)
  - [â›ï¸ åŸºæœ¬ä½¿ç”¨](#ï¸-åŸºæœ¬ä½¿ç”¨)
    - [å¯¼å‡º](#å¯¼å‡º)
    - [å¯¼å…¥](#å¯¼å…¥)
  - [âš ï¸ æ³¨æ„ç‚¹](#ï¸-æ³¨æ„ç‚¹)
  - [ğŸ§‘â€ğŸ¤â€ğŸ§‘ åŠ¨æ€ä¾èµ–](#-åŠ¨æ€ä¾èµ–)
  - [âš›ï¸ ç¬¦å·ç»‘å®š](#ï¸-ç¬¦å·ç»‘å®š)
# ES Module

## â›ï¸ åŸºæœ¬ä½¿ç”¨
### å¯¼å‡º
- å…·åå¯¼å‡ºï¼ˆæ™®é€šå¯¼å‡ºï¼‰ï¼Œå¯ä»¥å¯¼å‡ºå¤šä¸ª
- é»˜è®¤å¯¼å‡ºï¼Œåªèƒ½å¯¼å‡ºä¸€ä¸ª

ä¸€ä¸ªæ¨¡å—å¯ä»¥åŒæ—¶å­˜åœ¨ä¸¤ç§å¯¼å‡ºæ–¹å¼ï¼Œæœ€ç»ˆä¼šåˆå¹¶ä¸ºä¸€ä¸ªã€Œå¯¹è±¡ã€å¯¼å‡º
```js
export const a = 1; // å…·åï¼Œå¸¸ç”¨
export function b() {} // å…·åï¼Œå¸¸ç”¨
export const c = () => {} Â // å…·åï¼Œå¸¸ç”¨
const d = 2;
export { d } // å…·å
const k = 10
export { k as temp } // å…·å

// export default 3 // é»˜è®¤ï¼Œå¸¸ç”¨
// export default function() {} // é»˜è®¤ï¼Œå¸¸ç”¨
// const e = 4;
// export { e as default } // é»˜è®¤

const f = 4, g = 5, h = 6
export { f, g, h as default} // åŸºæœ¬ + é»˜è®¤

// ä»¥ä¸Šä»£ç å°†å¯¼å‡ºä¸‹é¢çš„å¯¹è±¡
/*
{
    a: 1,
    b: fn,
    c: fn,
    d: 2,
    temp: 10,
    f: 4,
    g: 5,
    default: 6
}
*/
```
### å¯¼å…¥
```js
// ä»…è¿è¡Œä¸€æ¬¡è¯¥æ¨¡å—ï¼Œä¸å¯¼å…¥ä»»ä½•å†…å®¹
import "æ¨¡å—è·¯å¾„"
// å¸¸ç”¨ï¼Œå¯¼å…¥å±æ€§ aã€bï¼Œæ”¾åˆ°å˜é‡aã€bä¸­ã€‚a->a, b->b
import { a, b } from "æ¨¡å—è·¯å¾„"
// å¸¸ç”¨ï¼Œå¯¼å…¥å±æ€§ defaultï¼Œæ”¾å…¥å˜é‡cä¸­ã€‚default->c
import c from "æ¨¡å—è·¯å¾„"
// å¸¸ç”¨ï¼Œdefault->cï¼Œa->a, b->b
import c, { a, b } from "æ¨¡å—è·¯å¾„"
// å¸¸ç”¨ï¼Œå°†æ¨¡å—å¯¹è±¡æ”¾å…¥åˆ°å˜é‡objä¸­
import * as obj from "æ¨¡å—è·¯å¾„"


// å¯¼å…¥å±æ€§aã€bï¼Œæ”¾åˆ°å˜é‡temp1ã€temp2 ä¸­
import {a as temp1, b as temp2} from "æ¨¡å—è·¯å¾„"
// å¯¼å…¥å±æ€§defaultï¼Œæ”¾å…¥å˜é‡aä¸­ï¼Œdefaultæ˜¯å…³é”®å­—ï¼Œä¸èƒ½ä½œä¸ºå˜é‡åï¼Œå¿…é¡»å®šä¹‰åˆ«å
import {default as a} from "æ¨¡å—è·¯å¾„"
//å¯¼å…¥å±æ€§defaultã€bï¼Œæ”¾å…¥å˜é‡aã€bä¸­
import {default as a, b} from "æ¨¡å—è·¯å¾„"
// ä»¥ä¸Šå‡ä¸ºé™æ€å¯¼å…¥

import("æ¨¡å—è·¯å¾„") // åŠ¨æ€å¯¼å…¥ï¼Œè¿”å›ä¸€ä¸ªPromiseï¼Œå®Œæˆæ—¶çš„æ•°æ®ä¸ºæ¨¡å—å¯¹è±¡
```

## âš ï¸ æ³¨æ„ç‚¹
- å¯¼å‡ºä»£ç å¿…é¡»ä¸ºé¡¶çº§ä»£ç ï¼Œå³ä¸å¯æ”¾åˆ°ä»£ç å—ä¸­
- é™æ€å¯¼å…¥çš„ä»£ç å¿…é¡»ä¸ºåœ¨ä»£ç é¡¶ç«¯ï¼Œä¹Ÿä¸å¯æ”¾å…¥ä»£ç å—ä¸­
- é™æ€å¯¼å…¥çš„ä»£ç ç»‘å®šçš„ç¬¦å·æ˜¯å¸¸é‡ï¼Œä¸å¯æ›´æ”¹

## ğŸ§‘â€ğŸ¤â€ğŸ§‘ åŠ¨æ€ä¾èµ–
åœ¨è¿è¡Œçš„æ—¶å€™æ‰èƒ½ç¡®å®šä¾èµ–å…³ç³»ï¼Œå’ŒåƒCJSä¸€æ ·å¯ä»¥åœ¨ä»£ç æ‰§è¡Œæ—¶å€™å¯¼å…¥ï¼Œæ¯”å¦‚ifåˆ¤æ–­æˆ–è€…å‡½æ•°ä¸­ã€‚
```js
// module.js
export default 'a'
export const count = 0
```
```js
// index.js
import("./module,js").then(m=>{
  console.log(m) // log: {"count": 0,"default": "a"}
})
```
é™æ€ä¾èµ–ï¼šåœ¨ä»£ç è¿è¡Œå‰å°±è¦ç¡®å®šä¾èµ–å…³ç³»

- è¦åœ¨é¡¶éƒ¨å¯¼å…¥ä¾èµ–ï¼Œä¸èƒ½åƒCJSä¸€æ ·åœ¨ä»£ç æ‰§è¡Œæ—¶å€™å¯¼å…¥ï¼Œæ¯”å¦‚ifåˆ¤æ–­æˆ–è€…å‡½æ•°ä¸­ã€‚

## âš›ï¸ ç¬¦å·ç»‘å®š
å¯¼å…¥çš„æ—¶å€™`{count, changeCount}` ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿä¸æ˜¯è§£æ„ï¼Œ`count` å’Œ `c`æ˜¯åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œæœ‰ç‚¹ç±»ä¼¼å¼•ç”¨åœ°å€ä¼ é€’ã€‚
```js
// module.js
export var count = 1;
export function changeCount(){
  count = 2;
}

// index.js
// å¯¼å…¥ä½ç½®çš„ç¬¦å·å’Œå¯¼å‡ºçš„ç¬¦å·å¹¶éèµ‹å€¼ï¼Œå®ƒä»¬å®Œå…¨æ˜¯ä¸€ä¸ªä¸œè¥¿
import {count as c, changeCount} from './module.js';
console.log(c); // 1
changeCount();
console.log(c); // 2
```
å¦‚æœåƒä»¥ä¸‹çš„æƒ…å†µ,count å’Œ cä¸æ˜¯åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œæ˜¯ä¸¤å—ä¸ä¸€æ ·çš„å†…å­˜ç©ºé—´ã€‚
```js
// module.js
export var count = 1;
export function changeCount(){
  count = 2;
}

// index.js
// å¯¼å…¥ä½ç½®çš„ç¬¦å·å’Œå¯¼å‡ºçš„ç¬¦å·å¹¶éèµ‹å€¼ï¼Œå®ƒä»¬å®Œå…¨æ˜¯ä¸€ä¸ªä¸œè¥¿
import {count, changeCount} from './module.js';
const c = count
console.log(c); // 1
changeCount();
console.log(c); // 1
```